<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ML for Biologists</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- PrismJS theme (light, IDE-like) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css"
  />

  <!-- Optional: line numbers -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
  />

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #ffffff;
      color: #222;
    }

    #container {
      display: flex;
      height: 100vh;
    }

    #sidebar {
      width: 260px;
      border-right: 1px solid #ddd;
      padding: 1rem;
      overflow-y: auto;
      background: #f7f7f7;
    }

    #sidebar h2 {
      margin-top: 0;
      font-size: 1.1rem;
    }

    #sidebar a {
      display: block;
      padding: 0.4rem 0;
      color: #0366d6;
      text-decoration: none;
      cursor: pointer;
    }

    #sidebar a:hover {
      text-decoration: underline;
    }

    #content {
      flex: 1;
      padding: 2rem;
      overflow-y: auto;
      max-width: 900px;
      margin: 0 auto;
    }

    pre {
      border-radius: 6px;
      padding: 1em;
      overflow-x: auto;
    }
  </style>
</head>
<body>

<div id="container">
  <nav id="sidebar">
    <h2>Chapters</h2>
    <a onclick="loadChapter('chapters/chapter1.md')">Chapter 1</a>
    <a onclick="loadChapter('chapters/chapter2.md')">Chapter 2</a>
    <a onclick="loadChapter('chapters/chapter3.md')">Chapter 3</a>
  </nav>

  <main id="content">
    <h1>Welcome</h1>
    <p>Select a chapter to begin reading.</p>
  </main>
</div>

<!-- Marked (Markdown parser) -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<!-- Prism core -->
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>

<!-- Prism Python language -->
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>

<!-- Optional: line numbers -->
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

<script>
  async function loadChapter(path) {
    try {
      const response = await fetch(path);
      if (!response.ok) throw new Error("Failed to load");

      const markdown = await response.text();

      // Render markdown to HTML
      document.getElementById("content").innerHTML =
        marked.parse(markdown);

      // Prism highlights AFTER content is injected
      Prism.highlightAll();

    } catch (err) {
      document.getElementById("content").innerHTML =
        "<p><strong>Failed to load chapter.</strong></p>";
    }
  }
</script>

</body>
</html>
