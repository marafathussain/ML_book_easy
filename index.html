<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ML for Biologists</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- PrismJS theme (IDE-like colors) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css"
  />

  <!-- Optional: line numbers -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
  />

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #ffffff;
      color: #222;
    }

    #container {
      display: flex;
      height: 100vh;
    }

    nav {
      width: 260px;
      padding: 1.5rem;
      border-right: 1px solid #ddd;
      background: #f6f6f6;
      overflow-y: auto;
    }

    nav h2 {
      margin-top: 0;
      font-size: 1.2rem;
    }

    nav a {
      display: block;
      margin: 0.6rem 0;
      color: #0366d6;
      text-decoration: none;
      cursor: pointer;
    }

    nav a:hover {
      text-decoration: underline;
    }

    main {
      flex: 1;
      overflow-y: auto;
      display: flex;
      justify-content: center;
    }

    #content {
      max-width: 900px;
      width: 100%;
      padding: 3rem;
      line-height: 1.7;
    }

    h1 { font-size: 2.4rem; }
    h2 { font-size: 1.9rem; margin-top: 2.5rem; }
    h3 { font-size: 1.4rem; }

    p {
      font-size: 1.1rem;
      margin: 1.2rem 0;
    }

    pre {
      border-radius: 6px;
    }

    @media (max-width: 900px) {
      nav {
        display: none;
      }
    }
  </style>
</head>

<body>

<div id="container">
  <nav>
    <h2>Contents</h2>
    <a onclick="loadChapter('chapters/chapter1.md')">Chapter 1</a>
    <a onclick="loadChapter('chapters/chapter2.md')">Chapter 2</a>
    <a onclick="loadChapter('chapters/chapter3.md')">Chapter 3</a>
  </nav>

  <main>
    <div id="content">
      <h1>Welcome</h1>
      <p>Select a chapter to begin.</p>
    </div>
  </main>
</div>

<!-- Markdown parser -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<!-- PrismJS -->
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

<!-- MathJax configuration -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']]
    }
  };
</script>

<!-- MathJax engine -->
<script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
  async>
</script>

<script>
  async function loadChapter(path) {
    try {
      const response = await fetch(path);
      if (!response.ok) throw new Error("Failed to load");

      const markdown = await response.text();
      const html = marked.parse(markdown);

      const content = document.getElementById("content");
      content.innerHTML = html;

      Prism.highlightAll();
      MathJax.typeset();

      content.scrollTop = 0;
    } catch (err) {
      document.getElementById("content").innerHTML =
        "<p><strong>Failed to load chapter.</strong></p>";
    }
  }

  // Load first chapter by default
  loadChapter('chapters/chapter1.md');
</script>

</body>
</html>
